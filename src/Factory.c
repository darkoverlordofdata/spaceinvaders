#include "wasm4.h"
#include "Factory.h"
#include "Component.h"
#include "Status.h"
#include "Position.h"

uint8_t  PlayerData[105]= {
    0x55,0x55,0x14,0x55,0x55,0x55,0x42,0x96,
    0x81,0x55,0x55,0x52,0x96,0x85,0x55,0x55,
    0x56,0x96,0x95,0x55,0x55,0x50,0x00,0x05,
    0x55,0x65,0x40,0x00,0x01,0x59,0x75,0x00,
    0x00,0x00,0x5d,0x74,0x00,0x00,0x00,0x1d,
    0xfc,0x00,0x00,0x00,0x3f,0xfc,0x00,0x00,
    0x00,0x3f,0xfc,0x00,0x00,0x00,0x3f,0xf0,
    0x00,0x00,0x00,0x0f,0x00,0x00,0x14,0x00,
    0x00,0x00,0x04,0x55,0x10,0x00,0x00,0x04,
    0x55,0x10,0x00,0x00,0x04,0x55,0x10,0x00,
    0x00,0x35,0x55,0x5c,0x00,0x00,0x35,0x55,
    0x5c,0x00,0x00,0x35,0x55,0x5c,0x00,0x00,
    0x35,0x55,0x5c,0x00,0x40,0xd5,0x55,0x57,
    0x01 
};

uint8_t EnemyData[16]= { 
    0x28,0x28,0x55,0x55,0x55,0x55,0x55,0x55,
    0x16,0x94,0x15,0x54,0x05,0x50,0x0c,0x30 
};

uint8_t BulletData[4]= {
    0x00, 0x00, 0x00, 0x00,
};

EntityRef CreatePlayer() {
    return CFCreate(Entity, AspectStatus | AspectPosition | AspectSprite,
                            CFCreate(Status, true), 
                            CFCreate(Position, 80, 129), 
                            CFCreate(Sprite, 20, 21, BLIT_2BPP, 0b0010001100000100, &PlayerData),
                            NULL);
}

EntityRef CreateBullet() {
    return CFCreate(Entity, AspectStatus | AspectPosition | AspectSprite,
                            CFCreate(Status, false), 
                            CFCreate(Position, 0, 0), 
                            CFCreate(Sprite, 1, 4, BLIT_1BPP, 0b0000000000000011, &BulletData),
                            NULL);
}

EntityRef CreateEnemy(int x, int y) {
    return CFCreate(Entity, AspectStatus | AspectPosition | AspectSprite,
                            CFCreate(Status, true), 
                            CFCreate(Position, x, y), 
                            CFCreate(Sprite, 8, 8, BLIT_2BPP, 0b0010001101000000, &EnemyData),
                            NULL);
}
